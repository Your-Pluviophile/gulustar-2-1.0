<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- å¼•å…¥é¥¿äº†ä¹ˆuiæ ·å¼ -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	<!-- å¼•å…¥iconé¡µé¢å›¾æ ‡ -->
	<link rel="shortcut icon" href="favicon.ico"/>
	<!-- å¼•å…¥å­—ä½“å›¾æ ‡ -->
	<link rel="stylesheet" href="./lib/font/iconfont.css">
	<!-- åæ¥å¼•å…¥çš„å­—ä½“å›¾æ ‡ -->
	<link rel="stylesheet" href="./lib/font2/iconfont_two.css">
	<!-- å¼•å…¥é¡µé¢ CSSæ–‡ä»¶ -->
	<link rel="stylesheet" href="./css/index.css">
	<!-- å¼•å…¥é¡µé¢ åˆå§‹åŒ–æ ·å¼ -->
	<link rel="stylesheet" href="./css/init.css">
	<!-- å¼•å…¥é¡µé¢ å…¬å…±æ ·å¼ -->
	<link rel="stylesheet" href="./css/public.css">
	<!-- å¼•å…¥é¡µé¢ å“åº”å¼æ ·å¼ -->
	<link rel="stylesheet" href="./css/Responsive.css">
	<!-- å¼•å…¥è½®æ’­å›¾ -->
	<link rel="stylesheet" href="./lib/swiper/swiper-bundle.min.css" />
	<title>GuluStar - ä¸æ–­æ”¹å–„ï¼Œæˆä¸ºæœ€ä½³ğŸ‰</title>
</head>

<body>
	<div id="app">
	<!-- å¯¼èˆªæ  -->
	<div class="nav">
		<div class="w">
			<!-- ä¸€çº§å¯¼èˆª -->
			<ul class="one">
				<!-- èœå• -->
				<li class="item" id="menu">
					<a href="javascript:;" style="display: inline-block;">
						<i class="iconfont icon-caidan1"></i>
					</a>
				</li>

				<!-- logo -->
				<li class="item1">
					<a href="./" @click="init()">
<!--						<img src="./image/logo2.png" alt="" id="logo">-->
						<img src="./images/02.png" alt="" id="logo">
					</a>
				</li>

				<li class="item1">
					<a href="javascript:;">
						<i class="iconfont icon-shouye"></i>å°ç»„ä»‹ç»
					</a>
				</li>

				<li class="item1">
					<a href="#" @click="getCollections()">
						<i class="iconfont icon-bijiben1"></i>æˆ‘çš„æ”¶è—
					</a>
				</li>

<!--				<li class="item1">-->
<!--					<a href="./index.html">-->
<!--						<i class="iconfont icon-yuandaima"></i>å…³æ³¨çš„äºº-->
<!--					</a>-->

<!--					&lt;!&ndash; äºŒçº§å¯¼èˆª &ndash;&gt;	-->
<!--					<ul class="two" style="display: none;">-->
<!--						<li>-->
<!--							<a href="javascript:;">HTML5</a>-->
<!--						</li>-->

<!--						<li>-->
<!--							<a href="javascript:;">CSS3</a>-->
<!--						</li>-->

<!--						<li>-->
<!--							<a href="javascript:;">JavaScript</a>-->
<!--						</li>-->
<!--					</ul>-->
<!--				</li>-->

				<li class="item1">
					<a href="#" @click="getHistory()">
						<i class="iconfont icon-zuzhijiagou1"></i>é˜…è§ˆå†å²
					</a>

					<!-- äºŒçº§å¯¼èˆª -->
<!--					<ul class="two" style="display: none;">-->
<!--						<li>-->
<!--							<a href="javascript:;">Vue</a>-->
<!--						</li>-->

<!--						<li>-->
<!--							<a href="javascript:;">React</a>-->
<!--						</li>-->

<!--						<li>-->
<!--							<a href="javascript:;">Angular</a>-->
<!--						</li>-->
<!--					</ul>-->
				</li>

				<li class="item1" v-if="user.isAdmin == 1">
					<a href="javascript:;">
						<i class="iconfont icon-zhuti1"></i>ç®¡ç†ç³»ç»Ÿ
					</a>

					<ul class="two" style="display: none;">
						<li>
							<a href="./links.html"><i class="iconfont icon-quanzi1"></i>äººè„‰åœˆ</a>
						</li>

						<li>
							<a href="./circle.html"><i class="iconfont icon-pengyouquan1"></i>æœ‹å‹åœˆ</a>
						</li>

						<li>
                            <a href="./bigData.html"><i class="iconfont icon-dashuju2"></i>å¤§æ•°æ®</a>
                        </li>
					</ul>
				</li>

				<!-- åŠŸèƒ½æ  -->
				<li class="function">
					<ol>
						<!-- ç™½å¤©æ˜¼å¤œåˆ‡æ¢ -->
						<li id="HighlightToggle">
							<img src="./image/taiyang.png" alt="">
						</li>

						<li>
							<a href="javascript:;">
								<i class="iconfont icon-sousuo1"></i>
							</a>
						</li>
					</ol>
				</li>
			</ul>
		</div>
	</div>

	<!-- é®ç½©å±‚ -->
	<div class="mask"></div>

	<!-- è½®æ’­å›¾ -->
	<div class="banner">
		<div class="swiper mySwiper">
			<div class="swiper-wrapper">
				<div class="swiper-slide">
					<div class="text">
						<h3>ä¸æ–­æ”¹å–„ï¼Œæˆä¸ºæœ€ä½³!</h3>
						<p>Constantly improve and become the best!</p>
					</div>

					<img src="http://139.196.43.147/gallery/t01d6f5fd3610da0a08.jpg" alt="">
				</div>

				<div class="swiper-slide">
					<div class="text">
						<h3>å”¯æœ‰åšæŒæ‰èƒ½çœ‹è§æ›™å…‰!</h3>
						<p>Only persistence can see the dawn!</p>
					</div>

					<img src="http://139.196.43.147/gallery/t012cde4a5058c156b7.jpg" alt="">
				</div>

				<div class="swiper-slide">
					<div class="text">
						<h3>æ°¸è¿œå¹´è½»ï¼Œæ°¸è¿œçƒ­æ³ªç›ˆçœ¶!</h3>
						<p>Forever young, forever tearful!</p>
					</div>

					<img src="http://139.196.43.147/gallery/t01aaa82ef6d0f1ec87.jpg" alt="">
				</div>
			</div>
			<div class="swiper-pagination"></div>
		</div>

		<!-- æ³¢çº¹ -->
		<div class="ripple">
			<svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
				viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
				<defs>
					<path id="gentle-wave"
						d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
				</defs>
				<g class="parallax">
					<use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" />
					<use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" />
					<use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" />
					<use xlink:href="#gentle-wave" x="48" y="7" fill="#fff" />
				</g>
			</svg>
		</div>
	</div>

	<!-- ä¸»ä½“å†…å®¹ -->
	<div class="main" id="top">
		<div class="w">
			<!-- æ–‡ç« åˆ—è¡¨ -->
			<div class="list home_list">
				<!-- å°åœ†ç‚¹ -->
				<div class="dots">
					<ol>
						<li></li>
						<li></li>
						<li></li>
					</ol>
				</div>

				<!-- åˆ—è¡¨ -->
				<ul>
					<li v-for="blog in blogs">
						<!-- æ–‡ç« ç¼©ç•¥å›¾ -->
						<div class="left" @click="openBlog(blog.id)">
							<a href="javascript:;">
<!--								<img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e7d37251bc04bf48caafe62eae2991e~tplv-k3u1fbpfcp-zoom-crop-mark:1304:1304:1304:734.awebp?" alt="">-->
								<img src="images/logo.jpg" alt="">
							</a>

							<span class="tags_blue">{{blog.category}}</span>
						</div>

						<!-- æ–‡ç« å†…å®¹ -->
						<div class="right">
							<!-- æ–‡ç« æ ‡é¢˜ -->
							<h2 @click="openBlog(blog.id)">
								<a href="javascript:;">
<!--									<span class="tags_purple">ç²¾å“</span> <span class="tags_red">ç½®é¡¶</span> <span-->
<!--										class="tags_yellow">æ¨è</span>-->
									<span class="tags_yellow">{{blog.category}}</span>
									{{blog.title}}
								</a>
							</h2>

							<!-- æ–‡ç« æ‘˜è¦ -->
							<p class="list-length">
								{{blog.description}}

							<!-- æ–‡ç« ä¿¡æ¯ -->
							<div class="meta">
								<!-- ä½œè€…å¤´åƒ -->
								<a href="javascript:;">
									<img src="./image/user1.png" alt="">
									<span>{{blog.author}}</span>
								</a>

								<div>
									<!-- æ–‡ç« ç‚¹èµæ•° -->
									<a href="javascript:;"><i class="iconfont icon-dianzan"
															  @click="good(blog.id), blog.likes += 1"
															  onclick="style='color: red; pointer-events: none;'"></i>{{blog.likes}}</a>
									<!-- æ–‡ç« æµè§ˆé‡ -->
									<a href="javascript:;"><i class="iconfont icon-shoucang"
															  @click="collect(blog.id), blog.collected += 1"
															  onclick="style='color: yellow; pointer-events: none;'"
															  :style="userCollections.includes(blog.id)? 'color:yellow; pointer-events: none;':''"></i>{{blog.collected}}</a>
									<!-- æ–‡ç« å‘å¸ƒæ—¶é—´ -->
									<a href="javascript:;"><i class="iconfont icon-shijian"></i>{{blog.releaseDate}}</a>
								</div>
							</div>
						</div>
					</li>
				</ul>

				<!-- åˆ†é¡µ -->
				<div class="pagination">
					<a href="#top" @click="isPageOne? '':prevPage()">â€¹</a>
					<a href="#"
					   v-for="i of conditions.total"
					   :class="i == conditions.currentPage? 'paginationAction':''"
					   @click="goToPage(i)"
					>{{i}}</a>
					<a href="#top" @click="isLastPage? '':nextPage()">â€º</a>
				</div>

				<!-- åŠ è½½åˆ—è¡¨ -->
				<div class="loadList">
					<i class="iconfont icon-loadm"></i>
					<span>åŠ è½½æ›´å¤š</span>
				</div>
			</div>

			<!-- åŠŸèƒ½æ¨¡å— -->
			<div class="function">
				<div class="sticky">
					<!-- ç”¨æˆ·è¯¦æƒ… -->
					<div class="author">
						<!-- èƒŒæ™¯å›¾ç‰‡ -->
						<div class="author-bg">
							<!-- å¤´åƒ -->
							<div class="avatar" @click="uploadImg()">
								<a href="javascript:;"><img src="./image/user1.png" alt=""></a>
							</div>
						</div>

						<!-- ä½œè€…ä¿¡æ¯ -->
						<div class="text">
							<h4>
								<a href="javascript:;">{{user.username}}</a>
								<div class="medal"></div>
							</h4>
							<p>{{user.username}},æ¬¢è¿æ¥åˆ°å’•å™œæ˜Ÿ</p>
						</div>

						<!-- åŠŸèƒ½ -->
						<div class="fun">
							<!-- ç™»å½• -->
							<div class="login" v-if="user.id == 0"><a href="javascript:;" @click="loginDialogVisible=true">ç™»å½•</a></div>

							<span></span>

							<!-- æ³¨å†Œ -->
							<div class="register" v-if="user.id == 0"><a href="javascript:;" @click="registeDialogVisible=true">æ³¨å†Œ</a></div>

							<!-- æ›´æ¢ -->
							<div class="login" style="background-color: green;" v-if="user.id > 0"><a href="javascript:;" @click="loginDialogVisible=true">åˆ‡æ¢ç”¨æˆ·</a></div>

							<span></span>

							<!-- æ³¨é”€ -->
							<div class="register" style="background-color: darkred;" v-if="user.id > 0"><a href="javascript:;" @click="logout()">é€€å‡ºç™»å½•</a></div>
						</div>
					</div>

					<!-- æ ‡ç­¾æ  -->
					<div class="containerA">
						<!-- æ ‡é¢˜ -->
						<div class="title">
							<h3><i class="iconfont icon-tuya_huabanfuben"></i> åˆ†ç±»æ ‡ç­¾</h3>
							<!-- å°åœ†ç‚¹ -->
							<div class="dots">
								<ol>
									<li></li>
									<li></li>
									<li></li>
								</ol>
							</div>
						</div>

						<!-- æ ‡ç­¾ -->
						<div class="containerA_Tags">
							<a href="#"
							   v-for="item in categories"
							   @click="getBlogsByCategory(item)">{{item}}</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- åº•éƒ¨ -->
	<div class="footer">
		<div class="w">
			<!-- ç«™ç‚¹ä¿¡æ¯ -->
			<div class="Web_info">
				<!-- ç«™ç‚¹åç§° -->
				<div class="Web_name">
					<h1><a href="javascript:;">GuluStar</a></h1>
					<div class="dian"></div>
				</div>

				<!-- ç«™ç‚¹æè¿° -->
				<div class="Web_describe">
					<p>Â© 2022 <a href="javascript:;">GuluStar</a> - ä¹Ÿè®¸ï¼Œå°†ä¼šæ˜¯æœ€å¥½ç”¨çš„åšå®¢ç®¡ç†ç³»ç»Ÿï¼</p>
					<p>Perhaps, it will be the best blog management system!</p>
				</div>
			</div>

			<!-- ICPå¤‡æ¡ˆå· -->
			<div class="ICP">
				<a href="https://beian.miit.gov.cn/#/Integrated/index"><i
						class="iconfont icon-icp-license"></i>è±«ICPå¤‡2020031040å·-1</a>
			</div>
		</div>
	</div>

	<!-- ä¾§è¾¹å·¥å…·æ  -->
	<div class="tool">
<!--		<div class="item">-->
<!--			<a href="javascript:;">-->
<!--				<i class="iconfont icon-zhuti_yifu_o"></i>-->
<!--			</a>-->
<!--		</div>-->

		<div class="item">
			<a href="javascript:;" id="returnTop">
				<i class="iconfont icon-fanhuidingbu1"></i>
			</a>
		</div>
	</div>

	<!-- ç™»å½•çª—å£ -->
		<el-dialog
			:lock-scroll="false"
			:visible.sync="loginDialogVisible"
			width="30%"
			center
			:close-on-click-modal="false"
            custom-class="customLoginDialog">
			<h1>LOGIN</h1>
			<input type="text" placeholder="å¸å·" v-model="loginInfo.account" @blur="checkAccLen()">
			<span class="lenCheck" v-if="accTooLong">è´¦å·é•¿åº¦ä¸èƒ½è¶…è¿‡12</span>
			<input type="password" placeholder="å¯†ç " v-model="loginInfo.password" @blur="checkPwdLen()">
			<span class="lenCheck" v-if="pwdTooLong">å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡20</span>
			<button type="submit" @click="login()">Login</button>
			<div class="control">
				<span>æ²¡æœ‰å¸å·ï¼Ÿ<a href="javascript:;"
							  @click="loginDialogVisible=false, registeDialogVisible=true">Register</a></span>
			</div>
	</el-dialog>

    <!-- æ³¨å†Œçª—å£ -->
    <el-dialog
			:lock-scroll="false"
			:visible.sync="registeDialogVisible"
			width="30%"
			center
			:close-on-click-modal="false"
			custom-class="customLoginDialog">
		<h1 class="register">REGISTER</h1>
		<input type="text" placeholder="æ˜µç§°" v-model="registeInfo.username" @blur="checkNewNameLen()">
		<span class="lenCheck" v-if="usernameTooLong">æ˜µç§°é•¿åº¦ä¸èƒ½è¶…è¿‡10</span>
		<input type="text" placeholder="å¸å·" v-model="registeInfo.account" @blur="checkNewAccLen()">
		<span class="lenCheck" v-if="newAccTooLong">è´¦å·é•¿åº¦ä¸èƒ½è¶…è¿‡12</span>
		<input type="password" placeholder="å¯†ç " v-model="registeInfo.password" @blur="checkNewPwdLen()">
		<span class="lenCheck" v-if="newPwdTooLong">å¯†ç é•¿åº¦ä¸èƒ½è¶…è¿‡20</span>
		<input type="password" placeholder="ç¡®è®¤å¯†ç " v-model="registeInfo.confirmPwd" @blur="checkTwiceInputPwd()">
		<span class="lenCheck" v-if="checkNewPwd">ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´</span>
		<button type="submit" @click="registe()">Register</button>
		<div class="registerText">
			<span>å·²æœ‰å¸å·ï¼Ÿ<a href="javascript:;" class="registerA"
						  @click="loginDialogVisible=true, registeDialogVisible=false">Login</a></span>
		</div>
    </el-dialog>

	</div>

	<!-- import Vue before Element -->
	<script src="https://cdn.jsdelivr.net/npm/vue@2.7.8"></script>
	<!--import ajax-axios -->
	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<!-- import Element JavaScript -->
	<script src="https://unpkg.com/element-ui/lib/index.js"></script>
	
	<script>
		new Vue({
			el: '#app',
			/*
				è·å–ç”¨æˆ·ä¿¡æ¯å¹¶åˆå§‹åŒ–åšå®¢åˆ—è¡¨,è·å–åˆ†ç±»ä¿¡æ¯
			 */
			mounted() {
				this.getBaseInfo();
			},
			methods: {
				getBaseInfo(){
					let currUserId = sessionStorage.getItem('currUserId');
					this.user.id = parseInt(currUserId == null? '0':currUserId);
					this.getUserInfo();
					this.getCollectBlogIds();
					this.getBlogsByPageAndCondition();
					this.getCategories();
				},
				init(){
					sessionStorage.removeItem("collect");
					sessionStorage.removeItem("history");
					this.getBlogsByPageAndCondition();
				},
				/*
					è¯·æ±‚ç”¨æˆ·æ”¶è—çš„åšå®¢çš„IDé›†åˆ
				 */
				getCollectBlogIds(){
					axios({
						method: "get",
						url: "http://localhost:8080/gulustar/user/getCollectBlogIds?userId=" + this.user.id,
					}).then(resp => {
						this.userCollections = resp.data;
					});
				},
				/*
					ç”¨æˆ·æ”¶è—åšå®¢
				 */
				collect(blogId){
					if (this.user.id == 0){
						this.$message({
							center: true,
							duration: 1000,
							showClose: true,
							message: 'è¯·å…ˆç™»å½•',
							type: 'info'
						});
						return;
					}

					axios({
						method: "put",
						url: "http://localhost:8080/gulustar/user/collect",
						data: {id: blogId, userId: this.user.id}
					});
					this.getCollectBlogIds();
				},
				/*
					ç‚¹èµ
				 */
				good(id){
					axios({
						method: "put",
						url: "http://localhost:8080/gulustar/blog/addLikes",
						data: id
					});
				},
				/*
					ä¸Šä¼ å¤´åƒ
				 */
				uploadImg(){
					alert("ä¸Šä¼ å¤´åƒ");
				},
				/*
					è·å–å…¨éƒ¨åˆ†ç±»
				 */
				getCategories(){
					axios({
						method: "get",
						url: "http://localhost:8080/gulustar/blog/getCategories"
					}).then(resp => {
						if (resp.data != null){
							this.categories = resp.data;
						}
					});
				},
				/*
					é€€å‡ºç™»å½•ï¼šæ¸…é™¤sessioné‡Œçš„ç”¨æˆ·ID
				 */
				logout(){
					sessionStorage.removeItem("currUserId");
					this.user.id = 0;
					this.user.username = 'å’•å™œæ˜Ÿç”¨æˆ·';
					this.user.status = 1;
					this.user.isAdmin = 0;
				},
				/*
					è·å–ç”¨æˆ·ä¿¡æ¯
				 */
				getUserInfo(){
					axios({
						method: "get",
						url: "http://localhost:8080/gulustar/user/getUserById?id=" + this.user.id
					}).then(resp => {
						if (resp.data != null){
							this.user = resp.data;
						}
					});
				},
				/*
					æ³¨å†Œæ—¶æ£€æŸ¥2æ¬¡å¯†ç æ˜¯å¦ä¸€è‡´
				 */
				checkTwiceInputPwd(){
					if (this.registeInfo.password != this.registeInfo.confirmPwd){
						this.checkNewPwd = true;
					}else {
						this.checkNewPwd = false;
					}
				},
				/*
					æ³¨å†Œæ—¶æ£€æŸ¥å¯†ç é•¿åº¦
				 */
				checkNewPwdLen(){
					if (this.registeInfo.password != '' && this.registeInfo.password.length > 20){
						this.newPwdTooLong = true;
					}else {
						this.newPwdTooLong = false;
					}
				},
				/*
					æ£€æŸ¥æ³¨å†Œæ—¶è´¦å·é•¿åº¦
				 */
				checkNewAccLen(){
					if (this.registeInfo.account != '' && this.registeInfo.account.length > 12){
						this.newAccTooLong = true;
					}else {
						this.newAccTooLong = false;
					}
				},
				/*
					æ³¨å†Œæ—¶æ£€æŸ¥æ˜µç§°é•¿åº¦
				 */
				checkNewNameLen(){
					if (this.registeInfo.username != '' && this.registeInfo.username.length > 10){
						this.usernameTooLong = true;
					}else {
						this.usernameTooLong = false;
					}
				},
				/*
					æ£€æŸ¥è´¦å·é•¿åº¦
				 */
				checkAccLen(){
					if (this.loginInfo.account != '' && this.loginInfo.account.length > 12){
						this.accTooLong = true;
					}else {
						this.accTooLong = false;
					}
				},
				/*
					æ£€æŸ¥å¯†ç é•¿åº¦
				 */
				checkPwdLen(){
					if (this.loginInfo.password != '' && this.loginInfo.password.length > 20){
						this.pwdTooLong = true;
					}else {
						this.pwdTooLong = false;
					}
				},
				getHistory(){
					if (this.user.id == 0){
						this.$message({
							center: true,
							duration: 1000,
							showClose: true,
							message: 'è¯·å…ˆç™»å½•',
							type: 'info'
						});
						return;
					}

					this.conditions.currentPage = 1;
					this.isPageOne = true;
					sessionStorage.removeItem("collect");
					sessionStorage.setItem("history", "true");

					axios({
						method: "get",
						url: "http://localhost:8080/gulustar/user/getUserHistory?userId=" + this.user.id +
								"&currentPage=" + this.conditions.currentPage + "&size=" + this.conditions.size +
								"&keyword=" + this.conditions.keyword + "&category=" + this.conditions.category,
					}).then(resp => {
						this.blogs = resp.data.blogs;
						this.conditions.total = resp.data.total;
					});
					this.conditions.category = '';
				},
				/*
					è·å–æ”¶è—çš„åšå®¢: é¡µæ•°æ”¹ä¸ºç¬¬ä¸€é¡µ,å‘é€ç”¨æˆ·IDå»åç«¯æŸ¥è¯¢
				 */
				getCollections(){
					if (this.user.id == 0){
						this.$message({
							center: true,
							duration: 1000,
							showClose: true,
							message: 'è¯·å…ˆç™»å½•',
							type: 'info'
						});
						return;
					}

					this.conditions.currentPage = 1;
					this.isPageOne = true;
					sessionStorage.removeItem("history");
					sessionStorage.setItem("collect", "true");

					axios({
						method: "get",
						url: "http://localhost:8080/gulustar/blog/queryCollectByUserId?userId=" + this.user.id +
								"&currentPage=" + this.conditions.currentPage + "&size=" + this.conditions.size +
								"&keyword=" + this.conditions.keyword + "&category=" + this.conditions.category,
					}).then(resp => {
						this.blogs = resp.data.blogs;
						this.conditions.total = resp.data.total;
					});
					this.conditions.category = '';
				},
				/*
					æ‰“å¼€æŒ‡å®šåšå®¢ï¼šæŠŠåšå®¢IDä¼ ç»™ä¸‹ä¸ªé¡µé¢
				 */
				openBlog(id){
					sessionStorage.setItem('currBlogId', id);
					this.addHistory(id);
					// window.location.href='/gulustar/src/main/webapp/article.html';
					window.location.href='/gulustar/article.html';
				},
				/*
					æ·»åŠ æµè§ˆè®°å½•
				 */
				addHistory(id){
					axios({
						method: "put",
						url: "http://localhost:8080/gulustar/user/addUserHistory",
						data: {userId: this.user.id, blogId: id}
					});
				},
				/*
					æ ¹æ®åˆ†ç±»æŸ¥è¯¢: æ ¹æ®åˆ†ç±»æŸ¥è¯¢ï¼Œå›åˆ°ç¬¬ä¸€é¡µå¼€å§‹æ˜¾ç¤º
				 */
				getBlogsByCategory(category){
					this.conditions.category = category;
					this.conditions.currentPage = 1;
					this.isPageOne = true;

					if (sessionStorage.getItem("collect") == "true"){
						this.getCollections();
						return;
					}
					if (sessionStorage.getItem("history") == "true"){
						this.getHistory();
						return;
					}

					this.getBlogsByPageAndCondition();
					this.conditions.category = '';
				},
				/*
					å‰å¾€æŒ‡å®šé¡µæ•° æŒ‡å®šé¡µæ•°ç„¶åæŸ¥è¯¢
				 */
				goToPage(i){
					this.conditions.currentPage = i;
					this.checkPage();
					this.getBlogsByPageAndCondition();
				},
				/*
					æ£€æŸ¥æ˜¯ä¸æ˜¯ç¬¬ä¸€é¡µæˆ–æœ€åä¸€é¡µï¼Œå¹¶è®¾ç½®å¯¹åº”boolå€¼
				 */
				checkPage(){
					if (this.conditions.currentPage == this.conditions.total){
						this.isLastPage = true;
					}else {
						this.isLastPage = false;
					}
					if (this.conditions.currentPage == 1){
						this.isPageOne = true;
					}else {
						this.isPageOne = false;
					}
				},
				/*
					ä¸Šä¸€é¡µ é¡µæ•°-1ç„¶åæŸ¥è¯¢
				 */
				prevPage(){
					this.conditions.currentPage -= 1;
					this.checkPage();
					this.getBlogsByPageAndCondition();
				},
				/*
					ä¸‹ä¸€é¡µ é¡µæ•°+1ç„¶åæŸ¥è¯¢
				 */
				nextPage(){
					this.conditions.currentPage += 1;
					this.checkPage();
					this.getBlogsByPageAndCondition();
				},
				/*
					è·å–æŒ‡å®šé¡µæ•°åšå®¢é›†åˆ: å‘é€å½“å‰é¡µæ•°å’Œå°ºå¯¸ç»™åç«¯ï¼Œå–å¾—åšå®¢é›†åˆå’Œæ€»é¡µæ•°æ•°æ®
				 */
				getBlogsByPageAndCondition(){
					if (sessionStorage.getItem("collect") == 'true'){
						this.getCollections();
						return;
					}
					if (sessionStorage.getItem("history") == "true"){
						this.getHistory();
						return;
					}
					if (this.conditions.currentPage == 1){
						this.isPageOne = true;
					}

					axios({
						method: "post",
						url: "http://localhost:8080/gulustar/blog/getBlogsByPageAndCondition",
						data: this.conditions
					}).then(resp => {
						this.blogs = resp.data.blogs;
						this.conditions.total = resp.data.total;
					});
				},
				/*
					è·å–æ‰€æœ‰åšå®¢ï¼šæŠŠç»“æœèµ‹å€¼ç»™data.blogs
				 */
				getAllBlogs(){
					axios({
						method: "get",
						url: "http://localhost:8080/gulustar/blog/getAllBlogs",
					}).then(resp => {
						this.blogs = resp.data;
					});
				},
				/*
					ç™»å½•æ–¹æ³•ï¼Œpostæ–¹å¼ä»¥JSONå½¢å¼å‘é€è´¦å·å¯†ç ç»™æ§åˆ¶å±‚
					æ ¹æ®è¿”å›å€¼æ˜¯å¦ä¸ºç©ºåˆ¤æ–­æ˜¯å¦ç™»å½•æˆåŠŸï¼Œå¦‚æœæˆåŠŸå°±é‡æ–°åŠ è½½ä¸»é¡µ
				 */
				login(){
					axios({
						method: "post",
						url: "http://localhost:8080/gulustar/user/login",
						data: this.loginInfo
					}).then(resp => {
						if (resp.data != null){
							this.user = resp.data;
							this.loginDialogVisible = false;
							this.init();
							this.$message({
								message: 'ç™»é™†æˆåŠŸ',
								type: 'success',
								duration: 1000,
								showClose: true
							});
							sessionStorage.setItem("currUserId", this.user.id);
							for (let i in this.loginInfo) {
								this.loginInfo[i] = '';
							}
							this.getBaseInfo();
						}else {
							this.$message({
								message: 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯',
								type: 'warning',
								duration: 1000,
								showClose: true
							});
						}
					});
				},
				/*
					æ³¨å†Œæ–¹æ³•ï¼šæŠŠè¡¨å•çš„ä¿¡æ¯å°è£…ä¸ºJSONå¯¹è±¡å‘ç»™åç«¯
					æ ¹æ®è¿”å›å€¼æç¤ºç”¨æˆ·æ˜¯å¦æ³¨å†ŒæˆåŠŸ
				 */
				registe(){
					for (let i in this.registeInfo) {
						if (this.registeInfo[i] == ''){
							this.$message({
								message: 'æ³¨å†Œä¿¡æ¯ä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥',
								duration: 1000,
								showClose: true,
								type: 'warning'
							});
							return;
						}
					}

					if (this.usernameTooLong || this.newAccTooLong || this.newPwdTooLong || this.checkNewPwd){
						this.$message({
							message: 'æ‚¨çš„æ³¨å†Œä¿¡æ¯æœ‰è¯¯ï¼Œè¯·æ£€æŸ¥',
							duration: 1000,
							showClose: true,
							type: 'warning'
						});
						return;
					}

					axios({
						method: "put",
						url: "http://localhost:8080/gulustar/user/registe",
						data: this.registeInfo
					}).then(resp => {
						if (resp.data == "OK"){
							this.$message({
								message: 'æ³¨å†ŒæˆåŠŸ,èµ¶å¿«ç™»å½•å§!',
								type: 'success'
							});
							this.loginInfo.account = this.registeInfo.account;
							this.loginInfo.password = this.registeInfo.password;
							for (let i in this.registeInfo) {
								this.registeInfo[i] = '';
							}
						}else {
							this.$message({
								message: 'æ³¨å†Œå¤±è´¥',
								type: 'warning'
							});
						}
					});
				}
			},
			data() {
				return{
					user: {								//å½“å‰ç”¨æˆ·ï¼šåŒ…æ‹¬IDã€æ˜µç§°ã€è´¦å·ã€çŠ¶æ€ã€ç®¡ç†å‘˜èº«ä»½
						id: 0,
						username: 'å’•å™œæ˜Ÿç”¨æˆ·',
						account: '',
						status: 1,
						isAdmin: 0
					},
					loginDialogVisible: false,          //ç”¨æ¥æ§åˆ¶æ˜¾ç¤ºç™»å½•çª—å£
					loginInfo: {                        //ç™»å½•ä¿¡æ¯ åŒ…æ‹¬è´¦å·ã€å¯†ç 
						account: '',
						password: ''
					},
					registeDialogVisible: false,        //æ§åˆ¶æ˜¾ç¤ºæ³¨å†Œçª—å£
					registeInfo: {                      //æ³¨å†Œä¿¡æ¯ åŒ…æ‹¬è´¦å·ã€æ˜µç§°ã€å¯†ç 
						username: '',
						account: '',
						password: '',
						confirmPwd: ''
					},
					blogs: [							//å±•ç¤ºåœ¨ä¸»é¡µçš„æ‰€æœ‰åšå®¢å¯¹è±¡
						{								//åŒ…æ‹¬idã€æ ‡é¢˜ã€ç®€ä»‹ã€ç‚¹èµæ•°ã€æ”¶è—æ•°ã€å‘å¸ƒæ—¥æœŸã€ä½œè€…
							id: 5,
							title: 'testtitle',
							description: 'testdes',
							likes: 0,
							collected: 0,
							releaseDate: '2022-08-14',
							author: 'aaa'
						},
						{
							id: 1,
							title: 'test1title',
							description: 'test1des',
							likes: 1,
							collected: 1,
							releaseDate: '2022-08-13',
							author: 'bbb'
						}
					],
					conditions: {						//æŸ¥è¯¢æ¡ä»¶ï¼š å…³é”®è¯ã€åˆ†ç±»ã€æ€»é¡µæ•°ã€é¡µæ•°ã€æ¡æ•°
						keyword: '',
						category: '',
						total: 8,
						currentPage: 1,
						size: 7
					},
					categories: ['æµ‹è¯•åˆ†ç±»1', 'æµ‹è¯•åˆ†ç±»2'],//åˆ†ç±»æ ‡ç­¾
					accTooLong: false,					//åˆ¤æ–­è´¦å·é•¿åº¦
					pwdTooLong: false,					//å¯†ç é•¿åº¦
					usernameTooLong: false,				//æ˜µç§°é•¿åº¦
					newAccTooLong: false,				//æ³¨å†Œæ—¶è´¦å·é•¿åº¦
					newPwdTooLong: false,				//æ³¨å†Œæ—¶å¯†ç é•¿åº¦
					checkNewPwd: false,					//2æ¬¡å¯†ç æ˜¯å¦ä¸€æ ·
					isPageOne: false,					//æ˜¯ç¬¬ä¸€é¡µ
					isLastPage: false,					//æ˜¯æœ€åä¸€é¡µ
					userCollections: [],				//ç”¨æˆ·æ”¶è—çš„åšå®¢çš„IDé›†åˆ
				}
			}
		})
	</script>

	<!-- å¼•å…¥å…¬å…± JavaScriptæ–‡ä»¶ -->
	<script src="./js/public.js"></script>
	<!-- å¼•å…¥é¡µé¢JavaScriptæ–‡ä»¶ -->
	<script src="./js/index.js"></script>
	<!-- å¼•å…¥swiperè½®æ’­å›¾æ’ä»¶ -->
	<script src="./lib/swiper/swiper-bundle.min.js"></script>
	<script>
		var swiper = new Swiper(".mySwiper", {
			pagination: {
				el: ".swiper-pagination",
				dynamicBullets: true
			},
			autoplay: {
				delay: 5000
			},
			loop: true,
		});
	</script>
</body>

</html>